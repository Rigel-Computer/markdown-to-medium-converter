<!-- 20.07.2025 21:18 | Button nur f√ºr macOS entfernt, Hinweis erg√§nzt -->
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Markdown to Medium.com Converter</title>
      <style>
         body {
            font-family: sans-serif;
            background: #f4f4f4;
            padding: 20px;
         }

         .container {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            flex-direction: row;
            gap: 20px;
         }

         textarea,
         .preview {
            flex: 1;
            height: 65vh;
            min-height: 300px;
            max-height: 65vh;
            min-height: 400px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: white;
            resize: none;
         }

         .preview {
            overflow-y: auto;
         }

         .pane {
            width: 50%;
            max-width: 50%;
            flex: 1 1 0;
            display: flex;
            flex-direction: column;
         }

         .controls {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
         }

         .hint {
            font-size: 14px;
            color: #444;
            max-width: 600px;
         }

         .centered {
            display: flex;
            flex-direction: column;
            align-items: center;
         }

         textarea,
         .preview {
            width: 100%;
            height: 600px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: white;
         }
         .preview {
            overflow-y: auto;
         }
         button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            background: #03a87c;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
         }
      
         .mac .only-non-mac { display: none !important; }
         .non-mac .only-mac { display: none !important; }

</style>
   </head>
   <body>

   <script>
      document.documentElement.classList.add(
         navigator.platform.toUpperCase().indexOf("MAC") >= 0 ? "mac" : "non-mac"
      );
   </script>


   

      <div class="centered">
         <h1>Markdown ‚Üí Medium.com HTML</h1>
         <p>
            Enter Markdown on the left. See the preview on the right. Click the
            button to copy the HTML code to your clipboard.
         </p>
         <div class="container">
            <div class="pane"><textarea id="markdown-input"></textarea></div>
            <div class="pane">
               <div id="preview" class="preview">
                  <em>Preview will appear here...</em>
               </div>
            </div>
         </div>

         

<div class="controls">
   <div class="only-non-mac">
      <button id="copy-btn">üìã Copy Medium HTML (Chrome / Edge only)</button>
      <div id="debug-msg" style="font-size: 13px; color: #666; margin-top: 10px"></div>
      <div class="hint">
         ‚ö†Ô∏è If using Firefox or other browsers, please manually select the text in the right window and copy with CTRL+C.
      </div>
   </div>
   <div class="only-mac hint">
      Just select the content in the right preview panel and copy it with CMD+C ‚Äì then paste it into Medium.
   </div>
</div>

</div>
   <div class="only-mac hint" style="display:none;">
      Just select the content on the right and paste it into Medium.
   </div>
</div>
</div>
      </div>
      <script>
         function markdownToMediumHTML(markdown) {
            let html = markdown;
            // Remove empty lines after Markdown headings (#, ##, ###)
            html = html.replace(/^(#{1,3} .+)\n\s*\n/gm, "$1\n");

            // STEP 1: Replace empty lines in code blocks with placeholders
            html = html.replace(
               /```(\w*)\n([\s\S]*?)```/g,
               (match, lang, code) => {
                  const codeWithPlaceholder = code.replace(
                     /\n\s*\n/g,
                     "\nAAAAAAAAAAAAAAAAAAAAAA\n"
                  );
                  return `\`\`\`${lang || ""}\n${codeWithPlaceholder}\`\`\``;
               }
            );

            // STEP 1.5: Replace hash at line start in ALL code blocks
            html = html.replace(
               /```(\w*)\n([\s\S]*?)```/g,
               (match, lang, code) => {
                  const codeWithHashPlaceholder = code.replace(
                     /^#/gm,
                     "HASH_PLACEHOLDER"
                  );
                  return `\`\`\`${
                     lang || ""
                  }\n${codeWithHashPlaceholder}\`\`\``;
               }
            );

            // STEP 1.6: Replace list symbols at line start in ALL code blocks
            html = html.replace(
               /```(\w*)\n([\s\S]*?)```/g,
               (match, lang, code) => {
                  const codeWithListPlaceholder = code.replace(
                     /^-/gm,
                     "LIST_SYMBOL_PLACEHOLDER"
                  );
                  return `\`\`\`${
                     lang || ""
                  }\n${codeWithListPlaceholder}\`\`\``;
               }
            );

            // STEP 2: Process code blocks (BEFORE headlines!)
            html = html.replace(/```(\w*)\n([\s\S]*?)```/g, (_, lang, code) => {
               return `<pre><code>${code}</code></pre>`;
            });

            // STEP 3: THEN process headlines (can't interfere with code blocks anymore)
            html = html.replace(/`([^`]+)`/g, "<code>$1</code>");
            html = html.replace(
               /\*\*\*([^*]+)\*\*\*/g,
               "<strong><em>$1</em></strong>"
            );
            html = html.replace(/\*\*([^*]+)\*\*/g, "<strong>$1</strong>");
            html = html.replace(/\*([^*]+)\*/g, "<em>$1</em>");

            html = html.replace(/^### (.*$)/gim, "<h4>$1</h4>");
            html = html.replace(/^## (.*$)/gim, "<h3>$1</h3>");
            html = html.replace(/^# (.*$)/gim, "<h2>$1</h2>");
            html = html.replace(/^> (.+)$/gm, "<blockquote>$1</blockquote>");
            html = html.replace(
               /\[([^\]]+)\]\(([^)]+)\)/g,
               '<a href="$2">$1</a>'
            );
            html = html.replace(/^---$/gm, "<hr />");

            html = html.replace(/((?:^\d+\. .+\n?)+)/gm, (match) => {
               const items = match
                  .trim()
                  .split("\n")
                  .map((line) => `<li>${line.replace(/^\d+\. /, "")}</li>`)
                  .join("");
               return `<ol>${items}</ol>`;
            });

            html = html.replace(/((?:^[-*+] .+\n?)+)/gm, (match) => {
               const items = match
                  .trim()
                  .split("\n")
                  .map((line) => `<li>${line.replace(/^[-*+] /, "")}</li>`)
                  .join("");
               return `<ul>${items}</ul>`;
            });

            html = html
               .split(/\n{2,}/)
               .map((paragraph) => {
                  paragraph = paragraph.trim();
                  if (
                     paragraph.match(
                        /^<(h[2-4]|ul|ol|li|blockquote|pre|code|hr|div)/
                     )
                  ) {
                     return paragraph;
                  }
                  return `<p>${paragraph}</p>`;
               })
               .join("");

            html = html.replace(/<p>(.*?)\n(.*?)<\/p>/g, "<p>$1<br>$2</p>");
            html = html.replace(
               /(<\/(h2|h3|h4|blockquote|pre|hr)>)<br\s*\/?>/g,
               "$1"
            );
            html = html.replace(/(<\/(h2|h3|h4)>)<br\s*\/?>/g, "$1");
            html = html.replace(/(<\/(h2|h3|h4)>)(\s*)<p><\/p>/g, "$1");
            html = html.replace(/(<\/(h2|h3|h4)>)<br\s*\/?>/g, "$1");
            html = html.replace(/(<\/(h2|h3|h4)>)(\s*)<p><\/p>/g, "$1");
            html = html.replace(/<h([2-4])><br\s*\/?><\/h\1>/g, "");
            html = html.replace(/<h([2-4])>\s*<\/h\1>/g, "");
            html = html.replace(/<h([2-4])>\s*<br\s*\/?>(\s*)<\/h\1>/g, "");

            // STEP 4: Replace all placeholders
            html = html.replace(/AAAAAAAAAAAAAAAAAAAAAA/g, " "); // Space for empty lines
            html = html.replace(/HASH_PLACEHOLDER/g, "#"); // Hash back
            html = html.replace(/LIST_SYMBOL_PLACEHOLDER/g, "-"); // List symbol back

            return html;
         }

         const markdownInput = document.getElementById("markdown-input");
         const preview = document.getElementById("preview");
         const copyBtn = document.getElementById("copy-btn");

         function updatePreview() {
            const markdown = markdownInput.value;
            const html = markdownToMediumHTML(markdown);
            preview.innerHTML = html || "<em>Preview will appear here...</em>";
         }

         markdownInput.addEventListener("input", updatePreview);

         copyBtn.addEventListener("click", async () => {
            const htmlElement = document.getElementById("preview");
            const debugEl = document.getElementById("debug-msg");

            const isMac = navigator.platform.toUpperCase().indexOf("MAC") >= 0;

            if (debugEl) {
               debugEl.textContent = isMac
                  ? "macOS detected ‚Äì using clipboard API."
                  : "Non-macOS ‚Äì using execCommand().";
            }

            if (isMac && navigator.clipboard?.writeText) {
               // macOS: clipboard API
               try {
                  await navigator.clipboard.writeText(htmlElement.innerHTML);
                  alert("‚úÖ Preview successfully copied (macOS).");
               } catch (err) {
                  alert("‚ùå Copy failed (macOS): " + err);
               }
            } else {
               // Fallback f√ºr Windows/Linux
               const range = document.createRange();
               range.selectNodeContents(htmlElement);
               const selection = window.getSelection();
               selection.removeAllRanges();
               selection.addRange(range);
               try {
                  document.execCommand("copy");
                  alert("‚úÖ Preview successfully copied.");
               } catch (err) {
                  alert("‚ùå Copy failed.");
               }
               selection.removeAllRanges();
            }
         });

         markdownInput.value = `# Example Heading

This is **bold text** and *italic text*.

## Subheading

- Point 1
- Point 2

> Quote

\`\`\`yaml
version: "3.5"
services:
   etcd:
      image: quay.io/coreos/etcd:v3.5.5
      # The brain - keeps everything coordinated
   
   minio:
      image: minio/minio:latest
      # The muscle - stores your vectors

   milvus:
      image: milvus:latest
      depends_on:
         - etcd
         - minio
      # The star - handles your queries
\`\`\`

[OpenAI](https://openai.com)

---

1. Numbered
2. Also this
`;

         updatePreview();
      </script>
   </body>
</html>

<!-- 20.07.2025 21:18 | Button nur f√ºr macOS entfernt, Hinweis erg√§nzt -->
